<!DOCTYPE html>

<!--[if lt IE 7]>    <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>     <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>     <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<title>Card edit</title>
<meta content="" name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<link href="/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/main.css" rel="stylesheet">
<link href="/css/pygments.css" rel="stylesheet">
<link href="/css/asciidoc.css" rel="stylesheet">
<link href="/favicon-192x192.png" rel="icon" sizes="192x192">
<script src="/vendor/modernizr/modernizr.js"></script>
<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create', 'UA-6195355-4', 'auto');ga('send','pageview');
    </script>
</link></link></link></link></link></link></meta></meta></meta></meta></head>
<body>
<!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container">
<div class="navbar-header">
<button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="/"><img src="/logo.png"/></a>
</div>
<div class="navbar-collapse collapse">
<ul class="nav navbar-nav">
<li><a href="/FIDO2">FIDO2</a></li><li><a href="/OTP">OTP</a></li><li><a href="/U2F">U2F</a></li><li><a href="/OATH">OATH</a></li><li class="active"><a href="/PGP">PGP</a></li><li><a href="/PIV">PIV</a></li><li><a href="/YubiHSM2">YubiHSM2</a></li><li><a href="/Software_Projects">Software Projects</a></li>
</ul>
<!-- Google Custom Search Engine -->
<div class="navbar-form navbar-right" id="search-box">
<script>
          (function() {
            var cx = '017198492754729237489:tcnraf8md8a';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
          </script>
<gcse:searchbox-only></gcse:searchbox-only>
</div>
<!-- End Google Custom Search Engine -->
</div><!--/.navbar-collapse -->
</div>
</div>
<div class="container">
<div class="row">
<ol class="breadcrumb">
<li><a href="/">Home</a></li>
<li><a href="/PGP">PGP</a></li>
<li class="active">Card edit</li>
</ol>
</div>
<div class="row">
<div class="col-md-4" style="padding-left: 0;">
<!-- Sidebar -->
<ul class="nav nav-side well well-sm">
<li class="active"><a href="/PGP">PGP</a><ul class="">
<li><a href="/PGP/Importing_keys.html">Importing keys</a></li>
<li class="active"><a href="/PGP/Card_edit.html">Card edit</a>
<li><a href="/PGP/SSH_authentication">SSH authentication</a></li>
<li><a href="/PGP/Git_signing.html">Git signing</a></li>
</li></ul>
</li></ul>
<!-- End sidebar -->
</div>
<div class="col-md-8">
<!-- Main content -->
<div class="sidelinks">
<ul>
<li><a href="https://github.com/Yubico/developers.yubico.com/issues/new?title=Suggested%20edit%20for%20PGP/Card_edit" rel="noopener noreferrer" target="_blank"><i class="fa fa-pencil-square-o fa-lg"></i> Suggest Edits</a></li>
</ul>
</div>
<div id="page-content"><h1>Card edit</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph"><p>Yubico has learned of a security issue with the OpenPGP Card applet project that is used in the YubiKey NEO. This vulnerability applies to you only if you are using OpenPGP, and you have the OpenPGP applet version 1.0.9 or earlier.
<a href="https://developers.yubico.com/ykneo-openpgp/SecurityAdvisory%202015-04-14.html">SecurityAdvisory 2015-04-14</a></p></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>To configure the OpenPGP application on a YubiKey you can use <a href="https://www.gnupg.org">GnuPG</a>.</p></div>
<div class="paragraph"><p>The documentation in this section assumes the reader has a general understanding of how GnuPG works.
For more in-depth documentation see the <a href="https://www.gnupg.org/documentation/">GnuPG documentation</a>,
especially the parts on the usage and setting of the PIN and reset codes may be useful.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph"><p>Installed the <a href="https://developers.yubico.com/yubikey-personalization/Manuals/ykpersonalize.1.html">Yubikey personalization tool</a>.</p></div>
<div class="paragraph"><p>Verify that your YubiKey has a firmware version 3.1.8 or later.</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>$ lsusb -v
...</pre>
</div></div>
<div class="paragraph"><p>Make sure that your device is in OTP/CCID or CCID mode, you can use ykpersonalize to switch
to OTP/U2F/CCID:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>$ ykpersonalize -m6
...</pre>
</div></div>
<div class="paragraph"><p>Check that your libccid version is 1.4.10 or later so that
/etc/libccid_Info.plist contains the YubiKey USB PID/VID.</p></div>
<div class="paragraph"><p>Check that your PCSCD setup is working.  Use "pcsc_scan" to check for
card readers, it should show "Yubikey" somewhere in the output.</p></div>
<div class="paragraph"><p>You need to use the GnuPG agent with scdaemon, and we recommend using
version 2.0.22 or later for full functionality.</p></div>
<div class="paragraph"><p>To check the application version you may run, after inserting your YubiKey:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>$ gpg-connect-agent --hex "scd apdu 00 f1 00 00" /bye
D[0000]  01 00 05 90 00                                     .....
OK</pre>
</div></div>
<div class="paragraph"><p>Where "01 00 05" means version 1.0.5. (see security advisory above if version &lt; 1.0.10)</p></div>
<div class="paragraph"><p>Note that with the release of YubiKey 4, this number will always be
equal to the firmware version.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_yubikey_4_touch">YubiKey 4 touch</h2>
<div class="sectionbody">
<div class="paragraph"><p>YubiKey 4 introduces a new <em>touch</em> feature that allows to protect the
use of the private keys with an additional layer. When this
functionality is enabled, the result of a cryptographic operation
involving a private key (signature, decryption or authentication) is
released only if the correct user PIN is provided <strong>and</strong> the YubiKey
touch sensor is triggered. This request of user presence ensures that
no malware can issue commands to the YubiKey without the user
noticing.<br>
The YubiKey signals a request for a touch event by blinking for up to
15 seconds. If no touch is provided within this period, the operation
will fail.</br></p></div>
<div class="paragraph"><p>There are three possible values for the touch parameter:</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
off
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
touch is disabled;
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
on 
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
touch is enabled;
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
fix
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
touch is enabled and can not be disabled unless a new private
  key is generated or imported.
</p>
</td>
</tr>
</table></div>
<div class="paragraph"><p>The touch parameter can be individually set on each one of the three
private keys and requires the use of the admin PIN.</p></div>
<div class="paragraph"><p>In order to activate this functionality, it is necessary to use a custom
bash script called <a href="https://github.com/a-dma/yubitouch">yubitouch.sh</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_example">Example</h2>
<div class="sectionbody">
<div class="paragraph"><p>The following demonstrate setting all the parameters in the OpenPGP
applet on a YubiKey.</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>user@debian:~$ gpg --card-edit

Application ID ...: D2760001240102000060000000420000
Version ..........: 2.0
Manufacturer .....: unknown
Serial number ....: 00000042
Name of cardholder: [not set]
Language prefs ...: [not set]
Sex ..............: unspecified
URL of public key : [not set]
Login data .......: [not set]
Signature PIN ....: forced
Key attributes ...: 2048R 2048R 2048R
Max. PIN lengths .: 127 127 127
PIN retry counter : 3 3 3
Signature counter : 0
Signature key ....: [none]
Encryption key....: [none]
Authentication key: [none]
General key info..: [none]

gpg/card&gt; admin
Admin commands are allowed

gpg/card&gt; passwd
gpg: OpenPGP card no. D2760001240102000060000000420000 detected

1 - change PIN
2 - unblock PIN
3 - change Admin PIN
4 - set the Reset Code
Q - quit

Your selection? 3
PIN changed.

1 - change PIN
2 - unblock PIN
3 - change Admin PIN
4 - set the Reset Code
Q - quit

Your selection? 1
PIN changed.

1 - change PIN
2 - unblock PIN
3 - change Admin PIN
4 - set the Reset Code
Q - quit

Your selection? q

gpg/card&gt; name
Cardholder's surname: Josefsson
Cardholder's given name: Simon

gpg/card&gt; lang
Language preferences: sv

gpg/card&gt; url
URL to retrieve public key: https://josefsson.org/1c5c4717.txt

gpg/card&gt; sex
Sex ((M)ale, (F)emale or space): m

gpg/card&gt; login
Login data (account name): jas

gpg/card&gt;

Application ID ...: D2760001240102000060000000420000
Version ..........: 2.0
Manufacturer .....: unknown
Serial number ....: 00000042
Name of cardholder: Simon Josefsson
Language prefs ...: sv
Sex ..............: male
URL of public key : https://josefsson.org/1c5c4717.txt
Login data .......: jas
Signature PIN ....: forced
Key attributes ...: 2048R 2048R 2048R
Max. PIN lengths .: 127 127 127
PIN retry counter : 3 3 3
Signature counter : 0
Signature key ....: [none]
Encryption key....: [none]
Authentication key: [none]
General key info..: [none]

gpg/card&gt; quit
user@debian:~$</pre>
</div></div>
<div class="paragraph"><p>The following example is YubiKey 4 specific and shows how to set touch
on the signature key:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>$ ./yubitouch.sh sig on
All done!</pre>
</div></div>
</div>
</div>
</div>
<!-- End main content -->
</div>
</div>
</div>
<footer class="container">
<div class="row" style="margin-top:30px;padding-top:20px;border-top:1px solid #eee;">
<div class="col-md-3">
<p style="line-height:2em;font-size:90%">
<strong><a href="https://developers.yubico.com/" style="color:#000">DEV.YUBICO</a></strong><br>
<a href="/FIDO2">FIDO2</a><br>
<a href="/OTP">OTP</a><br>
<a href="/U2F">U2F</a><br>
<a href="/OATH">OATH</a><br>
<a href="/PGP">PGP</a><br>
<a href="/PIV">PIV</a><br>
<a href="/YubiHSM2">YubiHSM2</a><br>
<a href="/Software_Projects">Software Projects</a><br>
</br></br></br></br></br></br></br></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:2em;font-size:90%"><strong>RESOURCES</strong><br>
<a href="https://store.yubico.com/" target="_blank">Buy YubiKeys</a><br>
<a href="https://www.yubico.com/blog/" target="_blank">Blog</a><br>
<a href="https://www.yubico.com/newsletter/" target="_blank">Newsletter</a><br>
<a href="http://forum.yubico.com/" target="_blank">Yubico Forum Archive</a></br></br></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:2em;font-size:90%"><strong><a href="https://www.yubico.com/" style="color:#000" target="_blank">YUBICO.COM</a></strong><br>
<a href="https://www.yubico.com/why-yubico/" target="_blank">Why Yubico</a><br>
<a href="https://www.yubico.com/about/about-us/" target="_blank">About Yubico</a></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:1em;font-size:90%"> </p>
<table align="right" cellpadding="0" cellspacing="0" style="color:#9aca3c">
<tbody>
<tr>
<td style="padding:10px"><a href="https://www.yubico.com/feed/" target="_blank" title="Blog RSS"><i class="fa fa-rss"></i></a></td>
<td style="padding:10px"><a href="https://twitter.com/yubico" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a></td>
<td style="padding:10px"><a href="https://plus.google.com/114531431015898699937" target="_blank" title="Google Plus"><i class="fa fa-google-plus"></i></a></td>
<td style="padding:10px"><a href="https://www.facebook.com/Yubikey" target="_blank" title="Facebook"><i class="fa fa-facebook"></i></a></td>
<td style="padding:10px"><a href="https://www.youtube.com/c/Yubico" target="_blank" title="YouTube"><i class="fa fa-youtube"></i></a></td>
<td style="padding:10px 0 10px 10px"><a href="https://github.com/Yubico" target="_blank" title="GitHub"><i class="fa fa-github"></i></a></td>
</tr>
</tbody>
</table>
</div>
</div>
</footer>
<!-- Offset anchor links for navbar -->
<script>
    var shiftWindow = function() { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
  </script>
<script src="/vendor/jquery/dist/jquery.min.js"></script>
<script src="/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
</body>
</html>