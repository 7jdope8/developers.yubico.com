<!DOCTYPE html>

<!--[if lt IE 7]>    <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>     <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>     <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<title>YubiKey PIV introduction</title>
<meta content="" name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<link href="/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/main.css" rel="stylesheet">
<link href="/css/pygments.css" rel="stylesheet">
<link href="/css/asciidoc.css" rel="stylesheet">
<link href="/favicon-192x192.png" rel="icon" sizes="192x192">
<script src="/vendor/modernizr/modernizr.js"></script>
<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create', 'UA-6195355-4', 'auto');ga('send','pageview');
    </script>
</link></link></link></link></link></link></meta></meta></meta></meta></head>
<body>
<!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container">
<div class="navbar-header">
<button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="/"><img src="/logo.png"/></a>
</div>
<div class="navbar-collapse collapse">
<ul class="nav navbar-nav">
<li><a href="/FIDO2">FIDO2</a></li><li><a href="/OTP">OTP</a></li><li><a href="/U2F">U2F</a></li><li><a href="/OATH">OATH</a></li><li><a href="/PGP">PGP</a></li><li><a href="/PIV">PIV</a></li><li><a href="/YubiHSM2">YubiHSM2</a></li><li><a href="/Software_Projects">Software Projects</a></li>
</ul>
<!-- Google Custom Search Engine -->
<div class="navbar-form navbar-right" id="search-box">
<script>
          (function() {
            var cx = '017198492754729237489:tcnraf8md8a';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
          </script>
<gcse:searchbox-only></gcse:searchbox-only>
</div>
<!-- End Google Custom Search Engine -->
</div><!--/.navbar-collapse -->
</div>
</div>
<div class="container">
<div class="row">
<ol class="breadcrumb">
<li><a href="/">Home</a></li>
<li><a href="/yubico-piv-tool">yubico-piv-tool</a></li>
<li class="active">YubiKey PIV introduction</li>
</ol>
</div>
<div class="row">
<div class="col-md-4" style="padding-left: 0;">
<!-- Sidebar -->
<ul class="nav nav-side well well-sm">
<li class="active"><a href="/yubico-piv-tool">yubico-piv-tool</a><ul class="">
<li><a href="/yubico-piv-tool/Release_Notes.html">Release Notes</a></li>
<li><a href="/yubico-piv-tool/Attestation.html">Attestation</a></li>
<li><a href="/yubico-piv-tool/YKCS11_release_notes.html">YKCS11 release notes</a></li>
<li class="active"><a href="/yubico-piv-tool/YubiKey_PIV_introduction.html">YubiKey PIV introduction</a>
</li></ul>
</li></ul>
<!-- End sidebar -->
</div>
<div class="col-md-8">
<!-- Main content -->
<div class="sidelinks">
<ul>
<li><a href="https://github.com/Yubico/yubico-piv-tool" rel="noopener noreferrer" target="_blank"><i class="fa fa-github fa-lg"></i> Github</a></li>
</ul>
</div>
<div id="page-content">
<div class="sect1">
<h1 id="_yubico_piv_tool">Yubico PIV Tool</h1>
<div class="sectionbody">
<div class="paragraph"><p>The YubiKey supports the Personal Identity Verification (PIV) card
interface specified in NIST SP 800-73 document "Cryptographic
Algorithms and Key Sizes for PIV".  PIV enables you to perform RSA or
ECC sign/decrypt operations using a private key stored on the
smartcard, through common interfaces like PKCS#11.  This project
contain the library, tools and PKCS#11 module to interact with the
hardware functionality.</p></div>
<div class="ulist"><ul>
<li>
<p>
PIV Standards <a href="https://csrc.nist.gov/groups/SNS/piv/standards.html" rel="noopener noreferrer" target="_blank">https://csrc.nist.gov/groups/SNS/piv/standards.html</a>
</p>
</li>
</ul></div>
<div class="sect2">
<h3 id="_general_information">General information</h3>
<div class="paragraph"><p>The default PIN code is 123456.  The default PUK code is 12345678.</p></div>
<div class="paragraph"><p>The default 3DES management key (9B) is
010203040506070801020304050607080102030405060708.</p></div>
<div class="paragraph"><p>The following key slots exists:</p></div>
<div class="ulist"><ul>
<li>
<p>
9A, 9C, 9D, 9E: RSA 1024, RSA 2048, or ECC secp256r1 keys
  (algorithms 6, 7, 11 respectively).
</p>
</li>
<li>
<p>
9B: Triple-DES key (algorithm 3) for PIV management.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The maximum size of stored objects is 2025/3049 bytes for current versions of
YubiKey NEO and YubiKey 4, respectively.</p></div>
<div class="paragraph"><p>Currently all functionality are available over both contact and
contactless interfaces (contrary to what the specifications mandate).</p></div>
</div>
<div class="sect2">
<h3 id="_preparing_a_yubikey_for_real_use">Preparing a YubiKey for real use</h3>
<div class="paragraph"><p>You would typically change the management key to make sure nobody but
you can modify the state of the PIV application on the YubiKey.  Make sure to
keep a copy of the key around for later use.
All of these invocations will leave traces of keys and pins in the command line
history, this can be avoided by leaving the argument out all-together and the
software will ask for key/pin to be input. For the management key option (-k)
this is achieved by leaving out the value but will specifying -k.</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>
<span class="sh-dollar"></span>key=`dd if=/dev/urandom 2&gt;/dev/null | tr -d '[:lower:]' | tr -cd '[:xdigit:]' | fold -w48 | head -1`
<span class="sh-dollar"></span>echo $key
<span class="sh-dollar"></span>yubico-piv-tool -aset-mgm-key -n$key
</pre>
</div></div>
<div class="paragraph"><p>The PIN and PUK should be changed as well.</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>
<span class="sh-dollar"></span>pin=`dd if=/dev/urandom 2&gt;/dev/null | tr -cd '[:digit:]' | fold -w6 | head -1`
<span class="sh-dollar"></span>echo $pin
</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>
<span class="sh-dollar"></span>puk=`dd if=/dev/urandom 2&gt;/dev/null | tr -cd '[:digit:]' | fold -w8 | head -1`
<span class="sh-dollar"></span>echo $puk
</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>
<span class="sh-dollar"></span>yubico-piv-tool -achange-pin -P123456 -N$pin
<span class="sh-dollar"></span>yubico-piv-tool -achange-puk -P12345678 -N$puk
</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_other_useful_commands">Other useful commands</h3>
<div class="paragraph"><p>To generate a new private key:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>
<span class="sh-dollar"></span>yubico-piv-tool -k$key -agenerate -s9c
</pre>
</div></div>
<div class="paragraph"><p>To reset PIN/PUK retry counter AND codes (default pin 123456 puk
12345678):</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>
<span class="sh-dollar"></span>yubico-piv-tool -k$key -averify -P$pin -apin-retries --pin-retries=3 --puk-retries=3
</pre>
</div></div>
<div class="paragraph"><p>To reset the application (PIN/PUK need to be blocked hence trying a couple
of times — you need to modify this if you have changed the default
number of PIN/PUK retries).</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>
<span class="sh-dollar"></span>yubico-piv-tool -averify-pin -P471112
<span class="sh-dollar"></span>yubico-piv-tool -averify-pin -P471112
<span class="sh-dollar"></span>yubico-piv-tool -averify-pin -P471112
<span class="sh-dollar"></span>yubico-piv-tool -averify-pin -P471112
<span class="sh-dollar"></span>yubico-piv-tool -achange-puk -P471112 -N6756789
<span class="sh-dollar"></span>yubico-piv-tool -achange-puk -P471112 -N6756789
<span class="sh-dollar"></span>yubico-piv-tool -achange-puk -P471112 -N6756789
<span class="sh-dollar"></span>yubico-piv-tool -achange-puk -P471112 -N6756789
<span class="sh-dollar"></span>yubico-piv-tool -areset
</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_software">Software</h3>
<div class="paragraph"><p>Card management has been tested with the tools from the OpenSC
project, specifically piv-tool, and Yubico’s PIV software (see
below).  Basic features should work with any PIV compliant
middleware.</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="https://github.com/OpenSC/OpenSC/wiki" rel="noopener noreferrer" target="_blank">https://github.com/OpenSC/OpenSC/wiki</a>
</p>
</li>
<li>
<p>
<a href="https://developers.yubico.com/yubico-piv-tool/">https://developers.yubico.com/yubico-piv-tool/</a>
</p>
</li>
<li>
<p>
<a href="https://developers.yubico.com/yubikey-piv-manager/">https://developers.yubico.com/yubikey-piv-manager/</a>
</p>
</li>
<li>
<p>
<a href="https://github.com/OpenSC/OpenSC/wiki/US-PIV" rel="noopener noreferrer" target="_blank">https://github.com/OpenSC/OpenSC/wiki/US-PIV</a>
</p>
</li>
<li>
<p>
<a href="https://github.com/OpenSC/OpenSC/wiki/PivTool" rel="noopener noreferrer" target="_blank">https://github.com/OpenSC/OpenSC/wiki/PivTool</a>
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_card_holder_unique_identifier">Card Holder Unique Identifier</h3>
<div class="paragraph"><p>For the application to be usable in windows the object CHUID (Card Holder
Unique Identifier) has to be set and unique. The card contents are
also aggressively cached so the CHUID has to be changed if the card
contents change.</p></div>
</div>
</div>
</div>
</div>
<!-- End main content -->
</div>
</div>
</div>
<footer class="container">
<div class="row" style="margin-top:30px;padding-top:20px;border-top:1px solid #eee;">
<div class="col-md-3">
<p style="line-height:2em;font-size:90%">
<strong><a href="https://developers.yubico.com/" style="color:#000">DEV.YUBICO</a></strong><br>
<a href="/FIDO2">FIDO2</a><br>
<a href="/OTP">OTP</a><br>
<a href="/U2F">U2F</a><br>
<a href="/OATH">OATH</a><br>
<a href="/PGP">PGP</a><br>
<a href="/PIV">PIV</a><br>
<a href="/YubiHSM2">YubiHSM2</a><br>
<a href="/Software_Projects">Software Projects</a><br>
</br></br></br></br></br></br></br></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:2em;font-size:90%"><strong>RESOURCES</strong><br>
<a href="https://store.yubico.com/" rel="noopener noreferrer" target="_blank">Buy YubiKeys</a><br>
<a href="https://www.yubico.com/blog/" rel="noopener noreferrer" target="_blank">Blog</a><br>
<a href="https://www.yubico.com/newsletter/" rel="noopener noreferrer" target="_blank">Newsletter</a><br>
<a href="http://forum.yubico.com/" rel="noopener noreferrer" target="_blank">Yubico Forum Archive</a></br></br></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:2em;font-size:90%"><strong><a href="https://www.yubico.com/" rel="noopener noreferrer" style="color:#000" target="_blank">YUBICO.COM</a></strong><br>
<a href="https://www.yubico.com/why-yubico/" rel="noopener noreferrer" target="_blank">Why Yubico</a><br>
<a href="https://www.yubico.com/about/about-us/" rel="noopener noreferrer" target="_blank">About Yubico</a></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:1em;font-size:90%"> </p>
<table align="right" cellpadding="0" cellspacing="0" style="color:#9aca3c">
<tbody>
<tr>
<td style="padding:10px"><a href="https://www.yubico.com/feed/" rel="noopener noreferrer" target="_blank" title="Blog RSS"><i class="fa fa-rss"></i></a></td>
<td style="padding:10px"><a href="https://twitter.com/yubico" rel="noopener noreferrer" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a></td>
<td style="padding:10px"><a href="https://plus.google.com/114531431015898699937" rel="noopener noreferrer" target="_blank" title="Google Plus"><i class="fa fa-google-plus"></i></a></td>
<td style="padding:10px"><a href="https://www.facebook.com/Yubikey" rel="noopener noreferrer" target="_blank" title="Facebook"><i class="fa fa-facebook"></i></a></td>
<td style="padding:10px"><a href="https://www.youtube.com/c/Yubico" rel="noopener noreferrer" target="_blank" title="YouTube"><i class="fa fa-youtube"></i></a></td>
<td style="padding:10px 0 10px 10px"><a href="https://github.com/Yubico" rel="noopener noreferrer" target="_blank" title="GitHub"><i class="fa fa-github"></i></a></td>
</tr>
</tbody>
</table>
</div>
</div>
</footer>
<!-- Offset anchor links for navbar -->
<script>
    var shiftWindow = function() { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
  </script>
<script src="/vendor/jquery/dist/jquery.min.js"></script>
<script src="/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
</body>
</html>