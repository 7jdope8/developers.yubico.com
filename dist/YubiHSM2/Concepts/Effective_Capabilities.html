<!DOCTYPE html>

<!--[if lt IE 7]>    <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>     <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>     <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<title>Effective Capabilities</title>
<meta content="" name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<link href="/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/main.css" rel="stylesheet">
<link href="/css/pygments.css" rel="stylesheet">
<link href="/css/asciidoc.css" rel="stylesheet">
<link href="/favicon-192x192.png" rel="icon" sizes="192x192">
<script src="/vendor/modernizr/modernizr.js"></script>
<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create', 'UA-6195355-4', 'auto');ga('send','pageview');
    </script>
</link></link></link></link></link></link></meta></meta></meta></meta></head>
<body>
<!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container">
<div class="navbar-header">
<button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="/"><img src="/logo.png"/></a>
</div>
<div class="navbar-collapse collapse">
<ul class="nav navbar-nav">
<li><a href="/FIDO2">FIDO2</a></li><li><a href="/OTP">OTP</a></li><li><a href="/U2F">U2F</a></li><li><a href="/OATH">OATH</a></li><li><a href="/PGP">PGP</a></li><li><a href="/PIV">PIV</a></li><li class="active"><a href="/YubiHSM2">YubiHSM2</a></li><li><a href="/Software_Projects">Software Projects</a></li>
</ul>
<!-- Google Custom Search Engine -->
<div class="navbar-form navbar-right" id="search-box">
<script>
          (function() {
            var cx = '017198492754729237489:tcnraf8md8a';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
          </script>
<gcse:searchbox-only></gcse:searchbox-only>
</div>
<!-- End Google Custom Search Engine -->
</div><!--/.navbar-collapse -->
</div>
</div>
<div class="container">
<div class="row">
<ol class="breadcrumb">
<li><a href="/">Home</a></li>
<li><a href="/YubiHSM2">YubiHSM2</a></li>
<li><a href="/YubiHSM2/Concepts">Concepts</a></li>
<li class="active">Effective Capabilities</li>
</ol>
</div>
<div class="row">
<div class="col-md-4" style="padding-left: 0;">
<!-- Sidebar -->
<ul class="nav nav-side well well-sm">
<li class="active"><a href="/YubiHSM2">YubiHSM2</a><ul class="">
<li><a href="/YubiHSM2/Releases">Releases</a></li>
<li><a href="/YubiHSM2/Product_Overview">Product Overview</a></li>
<li class="active"><a href="/YubiHSM2/Concepts">Concepts</a><ul class="">
<li><a href="/YubiHSM2/Concepts/Object.html">Object</a></li>
<li><a href="/YubiHSM2/Concepts/Object_ID.html">Object ID</a></li>
<li><a href="/YubiHSM2/Concepts/Capability.html">Capability</a></li>
<li><a href="/YubiHSM2/Concepts/Domain.html">Domain</a></li>
<li><a href="/YubiHSM2/Concepts/Session.html">Session</a></li>
<li><a href="/YubiHSM2/Concepts/Label.html">Label</a></li>
<li><a href="/YubiHSM2/Concepts/Sequence.html">Sequence</a></li>
<li class="active"><a href="/YubiHSM2/Concepts/Effective_Capabilities.html">Effective Capabilities</a>
<li><a href="/YubiHSM2/Concepts/Logs.html">Logs</a></li>
<li><a href="/YubiHSM2/Concepts/Algorithms.html">Algorithms</a></li>
<li><a href="/YubiHSM2/Concepts/Options.html">Options</a></li>
<li><a href="/YubiHSM2/Concepts/Errors.html">Errors</a></li>
<li><a href="/YubiHSM2/Concepts/Attestation.html">Attestation</a></li>
</li></ul>
<li><a href="/YubiHSM2/Commands">Commands</a></li>
<li><a href="/YubiHSM2/Component_Reference">Component Reference</a></li>
<li><a href="/YubiHSM2/Usage_Guides">Usage Guides</a></li>
<li><a href="/YubiHSM2/Backup_and_Restore">Backup and Restore</a></li>
</li></ul>
</li></ul>
<!-- End sidebar -->
</div>
<div class="col-md-8">
<!-- Main content -->
<div class="sidelinks">
<ul>
<li><a href="https://github.com/Yubico/developers.yubico.com/issues/new?title=Suggested%20edit%20for%20YubiHSM2/Concepts/Effective_Capabilities" rel="noopener noreferrer" target="_blank"><i class="fa fa-pencil-square-o fa-lg"></i> Suggest Edits</a></li>
</ul>
</div>
<div id="page-content">
<div class="sect1">
<h1 id="_effective_capabilities_tying_it_all_together">Effective Capabilities (Tying It All Together)</h1>
<div class="sectionbody">
<div class="paragraph"><p>This document describes how Object-related concepts all work together and interact with one another.</p></div>
<div class="paragraph"><p>This will be done with a toy example. Let us assume that we are trying to establish a Session with Authentication Key <code>0xabcd</code> so that it can use the Asymmetric Key <code>0x1234</code> to sign some data. The first thing required is to create and authenticate a Session. This requires knowledge of what the long-lived keys are (or what the associated derivation password is). Once a valid Session is established, a series of properties connected with the Authentication Key used to create the Session are inherited by the Session itself. More specifically: the <a href="Domain.html">Domains</a>, <a href="Capability.html">Capabilities</a> and <a href="Capability.html">Delegated Capabilities</a> associated with Authentication Key <code>0xabcd</code> are now part of the Session we just established.</p></div>
<div class="paragraph"><p>The first repercussion is that, out of all the different Objects stored in the device, we will only have access to those that belong to the same Domains as Authentication Key <code>0xabcd</code>.</p></div>
<div class="paragraph"><p>Assuming that Asymmetric Key <code>0x1234</code> is in one such Domain, we can now continue and ask the device to generate a signature. To do so we will send the appropriate command over the Session. For the command to be successfully executed, a series of things have to happen. First of all the arguments of the specific command (Sign Data in this case) have to be valid, i.e., no malformed data has to be sent to the device or an error will occur. Assuming that Asymmetric Key <code>0x1234</code> is an RSA 2048-bit key and that we would like to obtain a signature using RSASSA-PSS, <strong>both</strong> Authentication Key <code>0xabcd</code> and Asymmetric Key <code>0x1234</code> will have to have the Capability <code>sign-pss</code> set. Again, the required capability has to be set on both the Authentication Key used to establish the Session (Authentication Key <code>0xabcd</code>), and the target Object used to perform the operation (Asymmetric Key <code>0x1234</code>).</p></div>
<div class="paragraph"><p>In other words, we define the intersection between the Capabilities of the Authentication Key used to establish the Session, and the Capabilities of the target Object involved in the operation as the Effective Capabilities. An operation with a given target Object over a given Session will then only succeed if the Capabilities required by the operation are included in the Effective Capabilities.</p></div>
<div class="paragraph"><p>The interaction between Domains and Effective Capabilities allows for flexible setup and roles definition. For example, it is possible to assign a set of Capabilities to an Object, and then spread out the same Capabilities to different Authentication Keys so that each one of them is able to operate with the target Object in a very defined way. Alternatively, it is possible to completely disable specific operations by not assigning Capabilities to an Authentication Key. For example, an "Administrator" Authentication Key could be able to only create keys and a "User" Authentication Key could be able to only use those same keys.</p></div>
</div>
</div>
</div>
<!-- End main content -->
</div>
</div>
</div>
<footer class="container">
<div class="row" style="margin-top:30px;padding-top:20px;border-top:1px solid #eee;">
<div class="col-md-3">
<p style="line-height:2em;font-size:90%">
<strong><a href="https://developers.yubico.com/" style="color:#000">DEV.YUBICO</a></strong><br>
<a href="/FIDO2">FIDO2</a><br>
<a href="/OTP">OTP</a><br>
<a href="/U2F">U2F</a><br>
<a href="/OATH">OATH</a><br>
<a href="/PGP">PGP</a><br>
<a href="/PIV">PIV</a><br>
<a href="/YubiHSM2">YubiHSM2</a><br>
<a href="/Software_Projects">Software Projects</a><br>
</br></br></br></br></br></br></br></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:2em;font-size:90%"><strong>RESOURCES</strong><br>
<a href="https://store.yubico.com/" rel="noopener noreferrer" target="_blank">Buy YubiKeys</a><br>
<a href="https://www.yubico.com/blog/" rel="noopener noreferrer" target="_blank">Blog</a><br>
<a href="https://www.yubico.com/newsletter/" rel="noopener noreferrer" target="_blank">Newsletter</a><br>
<a href="http://forum.yubico.com/" rel="noopener noreferrer" target="_blank">Yubico Forum Archive</a></br></br></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:2em;font-size:90%"><strong><a href="https://www.yubico.com/" rel="noopener noreferrer" style="color:#000" target="_blank">YUBICO.COM</a></strong><br>
<a href="https://www.yubico.com/why-yubico/" rel="noopener noreferrer" target="_blank">Why Yubico</a><br>
<a href="https://www.yubico.com/about/about-us/" rel="noopener noreferrer" target="_blank">About Yubico</a></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:1em;font-size:90%"> </p>
<table align="right" cellpadding="0" cellspacing="0" style="color:#9aca3c">
<tbody>
<tr>
<td style="padding:10px"><a href="https://www.yubico.com/feed/" rel="noopener noreferrer" target="_blank" title="Blog RSS"><i class="fa fa-rss"></i></a></td>
<td style="padding:10px"><a href="https://twitter.com/yubico" rel="noopener noreferrer" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a></td>
<td style="padding:10px"><a href="https://plus.google.com/114531431015898699937" rel="noopener noreferrer" target="_blank" title="Google Plus"><i class="fa fa-google-plus"></i></a></td>
<td style="padding:10px"><a href="https://www.facebook.com/Yubikey" rel="noopener noreferrer" target="_blank" title="Facebook"><i class="fa fa-facebook"></i></a></td>
<td style="padding:10px"><a href="https://www.youtube.com/c/Yubico" rel="noopener noreferrer" target="_blank" title="YouTube"><i class="fa fa-youtube"></i></a></td>
<td style="padding:10px 0 10px 10px"><a href="https://github.com/Yubico" rel="noopener noreferrer" target="_blank" title="GitHub"><i class="fa fa-github"></i></a></td>
</tr>
</tbody>
</table>
</div>
</div>
</footer>
<!-- Offset anchor links for navbar -->
<script>
    var shiftWindow = function() { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
  </script>
<script src="/vendor/jquery/dist/jquery.min.js"></script>
<script src="/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
</body>
</html>