<!DOCTYPE html>

<!--[if lt IE 7]>    <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>     <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>     <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<title>pam u2f.8</title>
<meta content="" name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<link href="/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/main.css" rel="stylesheet">
<link href="/css/pygments.css" rel="stylesheet">
<link href="/css/asciidoc.css" rel="stylesheet">
<link href="/favicon-192x192.png" rel="icon" sizes="192x192">
<script src="/vendor/modernizr/modernizr.js"></script>
<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create', 'UA-6195355-4', 'auto');ga('send','pageview');
    </script>
</link></link></link></link></link></link></meta></meta></meta></meta></head>
<body>
<!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container">
<div class="navbar-header">
<button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="/"><img src="/logo.png"/></a>
</div>
<div class="navbar-collapse collapse">
<ul class="nav navbar-nav">
<li><a href="/FIDO2">FIDO2</a></li><li><a href="/OTP">OTP</a></li><li><a href="/U2F">U2F</a></li><li><a href="/OATH">OATH</a></li><li><a href="/PGP">PGP</a></li><li><a href="/PIV">PIV</a></li><li><a href="/YubiHSM2">YubiHSM2</a></li><li><a href="/Software_Projects">Software Projects</a></li>
</ul>
<!-- Google Custom Search Engine -->
<div class="navbar-form navbar-right" id="search-box">
<script>
          (function() {
            var cx = '017198492754729237489:tcnraf8md8a';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
          </script>
<gcse:searchbox-only></gcse:searchbox-only>
</div>
<!-- End Google Custom Search Engine -->
</div><!--/.navbar-collapse -->
</div>
</div>
<div class="container">
<div class="row">
<ol class="breadcrumb">
<li><a href="/">Home</a></li>
<li><a href="/pam-u2f">pam-u2f</a></li>
<li><a href="/pam-u2f/Manuals">Manuals</a></li>
<li class="active">pam u2f.8</li>
</ol>
</div>
<div class="row">
<div class="col-md-4" style="padding-left: 0;">
<!-- Sidebar -->
<ul class="nav nav-side well well-sm">
<li class="active"><a href="/pam-u2f">pam-u2f</a><ul class="">
<li><a href="/pam-u2f/Release_Notes.html">Release Notes</a></li>
<li class="active"><a href="/pam-u2f/Manuals">Manuals</a><ul class="">
<li class="active"><a href="/pam-u2f/Manuals/pam_u2f.8.html">pam u2f.8</a>
<li><a href="/pam-u2f/Manuals/pamu2fcfg.1.html">pamu2fcfg.1</a></li>
</li></ul>
</li></ul>
</li></ul>
<!-- End sidebar -->
</div>
<div class="col-md-8">
<!-- Main content -->
<div class="sidelinks">
<ul></ul>
</div>
<div id="page-content">
<div class="sect1">
<h1 id="_synopsis">SYNOPSIS</h1>
<div class="sectionbody">
<div class="paragraph"><p><strong>pam_u2f</strong> […]</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p>The module provides U2F authentication against Yubikeys and other compliant authenticators.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_options">OPTIONS</h2>
<div class="sectionbody">
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<strong>debug</strong>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Enables debug output
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>debug_file</strong>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Filename to write debug to, file must exist and be a regular file, or one of "stdout", "stderr", or "syslog". STDERR is the default.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>origin</strong>=<em>origin</em>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Set the origin for the U2F authentication procedure. If no value is specified, the origin "pam://$HOSTNAME" is used.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>appid</strong>=<em>appid</em>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Set the application ID for the U2F authentication procedure. If no value is specified, the same value used for origin is taken ("pam://$HOSTNAME" if also origin is not specified).
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>authfile</strong>=<em>file</em>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Set the location of the file that holds the mappings of user names to keyHandles and user keys. The format is username:keyHandle1,public_key1:keyHandle2,public_key2:… the default location of the file is $XDG_CONFIG_HOME/Yubico/u2f_keys. If the environment variable is not set, $HOME/.config/Yubico/u2f_keys is used.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>authpending_file</strong>=<em>file</em>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Set the location of the file that is used for touch request notifications. This file will be opened when pam-u2f starts waiting for a user to touch the device, and will be closed when it no longer waits for a touch. Use inotify to listen on these events, or a more high-level tool like yubikey-touch-detector. Default value: /var/run/user/$UID/pam-u2f-authpending. Set an empty value in order to disable this functionality, like so: "authpending_file=".
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>nouserok</strong>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Set to enable authentication attempts to succeed even if the user trying to authenticate is not found inside authfile or if authfile is missing/malformed.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>openasuser</strong>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Setuid to the authenticating user when opening the authfile. Useful when the user’s home is stored on an NFS volume mounted with the root_squash option (which maps root to nobody which will not be able to read the file).
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>alwaysok</strong>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Set to enable all authentication attempts to succeed (aka presentation mode).
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>max_devices</strong>=<em>n_devices</em>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Maximum number of devices allowed per user (default is 24). Devices specified
in the authentication file that exceed this value will be ignored.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>interactive</strong>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Set to prompt a message and wait before testing the presence of a U2F device. Recommended if your device doesn’t have tactile trigger.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
[prompt=your prompt here]
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Set individual prompt message for interactive mode. Watch the square brackets
around this parameter to get spaces correctly recognized by PAM.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>manual</strong>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Set to drop to a manual console where challenges are printed on screen and response read from standard input. Useful for debugging and SSH sessions without U2F-support from the SSH client/server. If enabled, interactive mode becomes redundant and has no effect.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>cue</strong>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Set to prompt a message to remind to touch the device.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>nodetect</strong>
<br>
</br></td>
<td class="hdlist2">
<p style="margin-top: 0;">
Skip detecting if a suitable key is inserted before performing a full authentication. See <strong>NOTES</strong> below.
</p>
</td>
</tr>
</table></div>
</div>
</div>
<div class="sect1">
<h2 id="_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="paragraph"><p>auth sufficient pam_u2f.so debug origin=pam://$HOSTNAME appid=pam://$HOSTNAME</p></div>
<div class="paragraph"><p>auth required pam_u2f.so origin=http://example.com appid=http://example.com authfile=/etc/yubikey_mappings</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_caveats">CAVEATS</h2>
<div class="sectionbody">
<div class="paragraph"><p>Using pam-u2f to secure the login to a computer while
storing the mapping file in an encrypted home directory, will result
in the impossibility of logging into the system. The partition is
decrypted after login and the mapping file can not be accessed.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_notes">NOTES</h2>
<div class="sectionbody">
<div class="paragraph"><p>The "nodetect" option should be used with caution. pam_u2f checks that a
key configured for the user is inserted before performing the full tactile
authentication. This detection is done by sending a "check-only"
authentication request to all inserted tokens to so see if at least one of
them responds affirmatively to one or more of the keyhandles configured for
the user. By doing this, pam_u2f can avoid emitting the "cue" prompt (if
configured), which can cause some confusing UI issues if the cue is emitted
followed by the underlying library immediately failing the tactile
authentication. This option is also useful to avoid an unintended 1-second
delay prior to the tactile authentication caused by versions of libu2f-host
&lt;= 1.1.5.</p></div>
<div class="paragraph"><p>If pam_u2f is configured to "cue" and "nodetect", an attacker can determine
that pam_u2f is part of the authentication stack by inserting any random
U2F token and performing an authentication attempt. In this scenario, the
attacker would see the cue message followed by an immediate failure,
whereas with detection enabled, the U2F authentication will fail silently.
Understand that an attacker could choose a U2F token that alerts him or
her in some way to the "check-only" authentication attempt, so this
precaution only pushes the issue back a step.</p></div>
<div class="paragraph"><p>In summary, the detection feature was added to avoid confusing UI issues
and to prevent leaking information about the authentication stack in very
specific scenario when "cue" is configured. The "nodetect" option was added
to avoid buggy sleep behavior in older versions of libu2f-host and for
hypothetical tokens that do not tolerate the double authentication.
Detection is performed, and likewise "nodetect" honored, regardless of
whether "cue" is also specified.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_bugs">BUGS</h2>
<div class="sectionbody">
<div class="paragraph"><p>Report pam-u2f bugs in the issue tracker: <a href="https://github.com/Yubico/pam-u2f/issues" rel="noopener noreferrer" target="_blank">https://github.com/Yubico/pam-u2f/issues</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>pam</strong>(7)</p></div>
<div class="paragraph"><p>The pam-u2f home page: <a href="https://developers.yubico.com/pam-u2f/">https://developers.yubico.com/pam-u2f/</a></p></div>
<div class="paragraph"><p>YubiKeys can be obtained from Yubico: <a href="http://www.yubico.com/" rel="noopener noreferrer" target="_blank">http://www.yubico.com/</a></p></div>
</div>
</div>
</div>
<!-- End main content -->
</div>
</div>
</div>
<footer class="container">
<div class="row" style="margin-top:30px;padding-top:20px;border-top:1px solid #eee;">
<div class="col-md-3">
<p style="line-height:2em;font-size:90%">
<strong><a href="https://developers.yubico.com/" style="color:#000">DEV.YUBICO</a></strong><br>
<a href="/FIDO2">FIDO2</a><br>
<a href="/OTP">OTP</a><br>
<a href="/U2F">U2F</a><br>
<a href="/OATH">OATH</a><br>
<a href="/PGP">PGP</a><br>
<a href="/PIV">PIV</a><br>
<a href="/YubiHSM2">YubiHSM2</a><br>
<a href="/Software_Projects">Software Projects</a><br>
</br></br></br></br></br></br></br></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:2em;font-size:90%"><strong>RESOURCES</strong><br>
<a href="https://store.yubico.com/" rel="noopener noreferrer" target="_blank">Buy YubiKeys</a><br>
<a href="https://www.yubico.com/blog/" rel="noopener noreferrer" target="_blank">Blog</a><br>
<a href="https://www.yubico.com/newsletter/" rel="noopener noreferrer" target="_blank">Newsletter</a><br>
<a href="http://forum.yubico.com/" rel="noopener noreferrer" target="_blank">Yubico Forum Archive</a></br></br></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:2em;font-size:90%"><strong><a href="https://www.yubico.com/" rel="noopener noreferrer" style="color:#000" target="_blank">YUBICO.COM</a></strong><br>
<a href="https://www.yubico.com/why-yubico/" rel="noopener noreferrer" target="_blank">Why Yubico</a><br>
<a href="https://www.yubico.com/about/about-us/" rel="noopener noreferrer" target="_blank">About Yubico</a></br></br></p>
</div>
<div class="col-md-3">
<p style="line-height:1em;font-size:90%"> </p>
<table align="right" cellpadding="0" cellspacing="0" style="color:#9aca3c">
<tbody>
<tr>
<td style="padding:10px"><a href="https://www.yubico.com/feed/" rel="noopener noreferrer" target="_blank" title="Blog RSS"><i class="fa fa-rss"></i></a></td>
<td style="padding:10px"><a href="https://twitter.com/yubico" rel="noopener noreferrer" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a></td>
<td style="padding:10px"><a href="https://plus.google.com/114531431015898699937" rel="noopener noreferrer" target="_blank" title="Google Plus"><i class="fa fa-google-plus"></i></a></td>
<td style="padding:10px"><a href="https://www.facebook.com/Yubikey" rel="noopener noreferrer" target="_blank" title="Facebook"><i class="fa fa-facebook"></i></a></td>
<td style="padding:10px"><a href="https://www.youtube.com/c/Yubico" rel="noopener noreferrer" target="_blank" title="YouTube"><i class="fa fa-youtube"></i></a></td>
<td style="padding:10px 0 10px 10px"><a href="https://github.com/Yubico" rel="noopener noreferrer" target="_blank" title="GitHub"><i class="fa fa-github"></i></a></td>
</tr>
</tbody>
</table>
</div>
</div>
</footer>
<!-- Offset anchor links for navbar -->
<script>
    var shiftWindow = function() { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
  </script>
<script src="/vendor/jquery/dist/jquery.min.js"></script>
<script src="/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
</body>
</html>